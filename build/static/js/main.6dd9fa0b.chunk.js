(this["webpackJsonpredux-sandbox"]=this["webpackJsonpredux-sandbox"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),o=n.n(c),a=n(7),s=n.n(a),i=n(3),l=n(4),d=n(5),u=n(10),j=n(9),b=(n(28),function(){return Object(r.jsx)("div",{className:"error-indicator",children:"Error!"})}),O=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(d.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(b,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.Component),h=function(){function e(){Object(l.a)(this,e),this.data=[{id:1,title:"Production-Ready Microservices",author:"Susan J. Fowler",price:32,coverImage:"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg"},{id:2,title:"Release It!",author:"Michael T. Nygard",price:45,coverImage:"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg"}]}return Object(d.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){Math.random()>.75?n(new Error("Something bad happened")):t(e.data)}),700)}))}}]),e}(),f=o.a.createContext(),m=n(8),p=n(2),x=n(6),v={books:[],loading:!0,error:null,cartItems:[],orderTotal:0},g=function(e,t,n){return 0===t.count?[].concat(Object(x.a)(e.slice(0,n)),Object(x.a)(e.slice(n+1))):-1===n?[].concat(Object(x.a)(e),[t]):[].concat(Object(x.a)(e.slice(0,n)),[t],Object(x.a)(e.slice(n+1)))},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"addToCart",r=arguments.length>3?arguments[3]:void 0,c=e+t,o=e-t,a=e-r;return"decreaseCartItems"===n?o:"deleteCartItems"===n?a:c},y=function(e,t,n,r){var c,o=e.books,a=e.cartItems,s=e.orderTotal,i=o.find((function(e){return e.id===t})),l=a.findIndex((function(e){return e.id===t})),d=a[l],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.id,c=void 0===r?e.id:r,o=t.count,a=void 0===o?0:o,s=t.title,i=void 0===s?e.title:s,l=t.total;return{id:c,title:i,count:a+n,total:(void 0===l?0:l)+n*e.price}}(i,d,n);return d?(console.log(d),c=k(s,i.price,r,d.total)):c=k(s,i.price,r),Object(p.a)(Object(p.a)({},e),{},{orderTotal:c,cartItems:g(a,u,l)})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOKS_LOADED":return Object(p.a)(Object(p.a)({},e),{},{books:t.payload,loading:!1,error:null});case"BOOKS_REQUESTED":return Object(p.a)(Object(p.a)({},e),{},{loading:!0,books:[],error:null});case"BOOKS_ERROR":return Object(p.a)(Object(p.a)({},e),{},{books:[],loading:!1,error:t.payload});case"BOOK_ADDED_TO_CART":return y(e,t.payload,1,"addToCart");case"ON_DECREASE":return y(e,t.payload,-1,"decreaseCartItems");case"ON_DELETE":var n=e.cartItems.find((function(e){return e.id===t.payload}));return y(e,t.payload,-n.count,"deleteCartItems");default:return e}},N=Object(m.b)(E),T=(n(29),n(30),n(31),function(e){var t=e.book,n=e.onAddedToCart,c=t.title,o=t.author,a=t.price,s=t.coverImage;return Object(r.jsxs)("div",{className:"book-list-item d-flex",children:[Object(r.jsx)("div",{className:"book-list-item-cover",children:Object(r.jsx)("img",{src:s,alt:"book"})}),Object(r.jsxs)("div",{className:"book-list-item-info",children:[Object(r.jsx)("span",{className:"book-title",children:c}),Object(r.jsx)("div",{className:"book-author",children:o}),Object(r.jsxs)("div",{className:"book-price",children:["$",a]}),Object(r.jsx)("button",{type:"button",className:"btn btn-info",onClick:n,children:"Add to cart"})]})]})}),C=function(e){return function(t){var n=Object(c.useContext)(f);return Object(r.jsx)(e,Object(p.a)(Object(p.a)({},t),{},{bookstoreService:n}))}},D=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},I=(n(32),function(){return Object(r.jsx)("div",{children:"Loading..."})}),_=function(e){var t=e.books,n=e.onAddedToCart;return Object(r.jsx)("ul",{className:"book-list",children:t.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(T,{book:e,onAddedToCart:function(){return n(e.id)}})},e.id)}))})},S=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,c=e.error,o=e.onAddedToCart;return n?Object(r.jsx)(I,{}):c?Object(r.jsx)(b,{}):Object(r.jsx)(_,{books:t,onAddedToCart:o})}}]),n}(c.Component),A=C(Object(i.b)((function(e){return{books:e.books,loading:e.loading,error:e.error}}),(function(e,t){var n=t.bookstoreService;return{fetchBooks:function(){e({type:"BOOKS_REQUESTED"}),n.getBooks().then((function(t){return e({type:"BOOKS_LOADED",payload:t})})).catch((function(t){return e({type:"BOOKS_ERROR",payload:t})}))},onAddedToCart:function(t){return e(D(t))}}}))(S)),R=(n(33),{onIncrease:D,onDecrease:function(e){return{type:"ON_DECREASE",payload:e}},onDelete:function(e){return{type:"ON_DELETE",payload:e}}}),B=Object(i.b)((function(e){return{cartItems:e.cartItems,orderTotal:e.orderTotal}}),R)((function(e){var t=e.cartItems,n=e.orderTotal,c=e.onDecrease,o=e.onIncrease,a=e.onDelete;return Object(r.jsxs)("div",{className:"table-container",children:[Object(r.jsx)("div",{className:"table-title",children:"Your Order"}),Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:"#"}),Object(r.jsx)("th",{scope:"col",children:"Item"}),Object(r.jsx)("th",{scope:"col",children:"Count"}),Object(r.jsx)("th",{scope:"col",children:"Price"}),Object(r.jsx)("th",{scope:"col",children:"Action"})]})}),Object(r.jsx)("tbody",{children:t.map((function(e,t){var n=e.id,s=e.title,i=e.count,l=e.total;return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:t+1}),Object(r.jsx)("td",{children:s}),Object(r.jsx)("td",{children:i}),Object(r.jsxs)("td",{children:["$",l]}),Object(r.jsxs)("td",{children:[Object(r.jsx)("button",{type:"button",className:"btn btn-outline-warning btn-sm float-center",onClick:function(){return c(n)},children:Object(r.jsx)("i",{className:"remove fa fa-minus-circle"})}),Object(r.jsx)("button",{type:"button",className:"btn btn-outline-success btn-sm float-center",onClick:function(){return o(n)},children:Object(r.jsx)("i",{className:"add fa fa-plus-circle"})}),Object(r.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm float-center",onClick:function(){return a(n)},children:Object(r.jsx)("i",{className:"trash fa fa-trash-o"})})]})]},n)}))})]}),Object(r.jsxs)("div",{className:"total",children:["Total: $",n]})]})})),w=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(A,{}),Object(r.jsx)(B,{})]})},K=(n(34),Object(i.b)((function(e){return{orderTotal:e.orderTotal}}))((function(e){var t=e.orderTotal;return Object(r.jsxs)("header",{className:"header d-flex",children:[Object(r.jsx)("div",{className:"header-title",children:"ReStore"}),Object(r.jsxs)("div",{className:"shopping-cart",children:[Object(r.jsx)("i",{className:"cart-icon fa fa-shopping-cart"}),"$",t]})]})}))),L=function(){return Object(r.jsxs)("main",{role:"main",className:"container",children:[Object(r.jsx)(K,{}),Object(r.jsx)(w,{})]})},J=new h;s.a.render(Object(r.jsx)(i.a,{store:N,children:Object(r.jsx)(O,{children:Object(r.jsx)(f.Provider,{value:J,children:Object(r.jsx)(L,{})})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.6dd9fa0b.chunk.js.map